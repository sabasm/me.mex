<div class="article-feed">
  <!-- .articles will be added to .article-feed -->
  {{#each posts}}
  <article class="post">
    <div class="uk-child-width-1-2@m" uk-grid>
      <div>
          <div class="uk-card uk-card-default">
              <div class="uk-card-body">
                  <h3 class="uk-card-title">{{this.title}}</h3>
              </div>
              <div class="uk-card-media-top">
                  <img src="{{this.url}}">
              </div>
                <div class="tagsHome">
                    {{#each this.tags}}
                        <a href="/canales/{{this}}"><span class="tagsHomeSpan">#{{this}}</span></a>
                    {{/each}}
                </div>
                <form class="likesTag" action="/posting/like" method="POST">
                    <input style="display:none;" type="text" name="url" value="{{this.url}}">
                    <button class="submitButton" type="submit"><i class="far fa-thumbs-up"></i></button>
                </form>
          </div>
      </div>
    </div>
  </article>
  {{/each}}

</div>
<head>
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-1713735179551973",
                enable_page_level_ads: true
            });
        </script>
</head>

<script>
    let forms = document.querySelectorAll('.likesTag')  
    console.log(forms)
    for(var i = 0; i < forms.length; i++){
        forms[i].addEventListener('submit', function(e){
            e.preventDefault()
            let url = {value: e.srcElement[0].value}
            console.log(url)
            fetch('/post/like', {method: 'POST', body: JSON.stringify(url), 
            headers:{
                'Content-Type': 'application/json'
            }})
            .then(function(response) {
            if(response.ok) {
                return;
            }
            throw new Error('Request failed.');
            })
            .catch(function(error) {
            console.log(error);
            });
        })
    }
        
    
</script>
